import networkx as nx
import matplotlib.pyplot as plt

# Список обласних центрів України
cities = [
    "Київ", "Львів", "Харків", "Одеса", "Дніпро", "Запоріжжя", "Вінниця", "Полтава", "Чернігів",
    "Суми", "Черкаси", "Хмельницький", "Тернопіль", "Івано-Франківськ", "Ужгород", "Луцьк", "Рівне",
    "Житомир", "Кропивницький", "Миколаїв", "Херсон", "Чернівці", "Донецьк", "Луганськ"
]

# Створення графа
G = nx.Graph()
G.add_nodes_from(cities)

# Додавання зв'язків між містами з вагами (відстані в км)
edges = [
    ("Київ", "Житомир", 140), ("Київ", "Чернігів", 145), ("Київ", "Полтава", 345), ("Київ", "Черкаси", 192),
    ("Львів", "Рівне", 211), ("Львів", "Тернопіль", 134), ("Львів", "Івано-Франківськ", 150), ("Львів", "Ужгород", 270),
    ("Харків", "Суми", 180), ("Харків", "Полтава", 143), ("Харків", "Донецьк", 315), ("Харків", "Луганськ", 320),
    ("Одеса", "Миколаїв", 133), ("Одеса", "Вінниця", 420), ("Одеса", "Кропивницький", 285),
    ("Дніпро", "Запоріжжя", 85), ("Дніпро", "Полтава", 200), ("Дніпро", "Кропивницький", 250),
    ("Запоріжжя", "Донецьк", 225), ("Запоріжжя", "Херсон", 190),
    ("Вінниця", "Житомир", 128), ("Вінниця", "Хмельницький", 120), ("Вінниця", "Одеса", 420),
    ("Полтава", "Суми", 160),
    ("Черкаси", "Кропивницький", 120), ("Черкаси", "Дніпро", 220),
    ("Тернопіль", "Івано-Франківськ", 98), ("Тернопіль", "Хмельницький", 110),
    ("Івано-Франківськ", "Чернівці", 140),
    ("Ужгород", "Луцьк", 320),
    ("Рівне", "Житомир", 180), ("Рівне", "Луцьк", 80),
    ("Кропивницький", "Миколаїв", 200),
    ("Херсон", "Миколаїв", 72), ("Херсон", "Донецьк", 480),
    ("Чернівці", "Хмельницький", 190)
]

G.add_weighted_edges_from(edges)

# Візуалізація графа
plt.figure(figsize=(12, 8))
pos = nx.spring_layout(G)
nx.draw(G, pos, with_labels=True, node_size=1500, node_color="lightblue", font_size=10, edge_color="gray")
labels = nx.get_edge_attributes(G, 'weight')
nx.draw_networkx_edge_labels(G, pos, edge_labels=labels)
plt.title("Мережа автомобільних доріг між обласними центрами України")
plt.show()

# Реалізація алгоритму Дейкстри
shortest_paths = {}
for city in cities:
    shortest_paths[city] = nx.single_source_dijkstra_path_length(G, city)

# Вивід результатів
print("Найкоротші відстані між містами (за алгоритмом Дейкстри):")
for city, distances in shortest_paths.items():
    print(f"\nВід {city}:")
    for dest, dist in distances.items():
        print(f"  до {dest}: {dist} км")